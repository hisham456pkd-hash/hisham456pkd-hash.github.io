<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Password Generator â€” BlinkTools</title>
  <meta name="description" content="Generate strong random passwords with length and options. Copy instantly." />
  <link rel="stylesheet" href="../assets/style.css" />
</head>
<body>
<header>
  <div class="wrap topbar">
    <div class="brand">
      <div class="logo">âš¡</div>
      <div>BlinkTools <small>Password Generator</small></div>
    </div>
    <nav>
      <a href="../index.html">Home</a>
      <a href="password-generator.html">Password</a>
      <a href="../pages/privacy.html">Privacy</a>
      <a href="../pages/contact.html">Contact</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <div class="card" style="margin-top:14px">
    <div class="breadcrumb"><a href="../index.html">Home</a> â†’ Tools â†’ Password Generator</div>
    <h1 style="margin:6px 0 0">ğŸ” Password Generator</h1>
    <p>Create strong passwords instantly.</p>
  </div>

  <section class="adbox">
    <div class="label">Ad Space (after AdSense approval)</div>
    <div class="adslot">Ad will show here.</div>
  </section>

  <section class="card">
    <div class="row">
      <span class="pill">Length: <strong id="lenLabel">16</strong></span>
      <input id="len" type="range" min="8" max="40" value="16" style="flex:1" />
    </div>

    <div class="row" style="margin-top:10px">
      <label class="pill"><input type="checkbox" id="upper" checked /> Uppercase</label>
      <label class="pill"><input type="checkbox" id="lower" checked /> Lowercase</label>
      <label class="pill"><input type="checkbox" id="nums" checked /> Numbers</label>
      <label class="pill"><input type="checkbox" id="syms" checked /> Symbols</label>
    </div>

    <input id="out" readonly style="margin-top:12px" />
    <div class="btnRow">
      <button class="btn primary" id="gen">Generate</button>
      <button class="btn" id="copy">Copy</button>
    </div>

    <p class="mini" id="strength">Strength: -</p>
  </section>

  <footer class="footer">
    <div class="links">
      <a href="../pages/about.html">About</a>
      <a href="../pages/privacy.html">Privacy</a>
      <a href="../pages/terms.html">Terms</a>
      <a href="../pages/contact.html">Contact</a>
    </div>
    <p style="margin-top:10px">Â© <span id="year"></span> BlinkTools âš¡</p>
  </footer>
</main>

<script type="module">
  import { setYear, copyText, toast } from "../assets/app.js";
  setYear();

  const len = document.getElementById("len");
  const lenLabel = document.getElementById("lenLabel");
  const upper = document.getElementById("upper");
  const lower = document.getElementById("lower");
  const nums = document.getElementById("nums");
  const syms = document.getElementById("syms");
  const out = document.getElementById("out");
  const strength = document.getElementById("strength");

  len.addEventListener("input", ()=> lenLabel.textContent = len.value);

  function randChar(set){
    const arr = new Uint32Array(1);
    crypto.getRandomValues(arr);
    return set[arr[0] % set.length];
  }

  function gen(){
    const L = parseInt(len.value, 10);
    let sets = [];
    if(upper.checked) sets.push("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
    if(lower.checked) sets.push("abcdefghijklmnopqrstuvwxyz");
    if(nums.checked)  sets.push("0123456789");
    if(syms.checked)  sets.push("!@#$%^&*()-_=+[]{};:,.<>/?");

    if(sets.length === 0){
      toast("Pick at least one option ğŸ˜…");
      return;
    }

    let pwd = "";
    for(const s of sets) pwd += randChar(s);
    const all = sets.join("");
    while(pwd.length < L) pwd += randChar(all);

    // shuffle
    const a = pwd.split("");
    for(let i=a.length-1;i>0;i--){
      const r = new Uint32Array(1); crypto.getRandomValues(r);
      const j = r[0] % (i+1);
      [a[i], a[j]] = [a[j], a[i]];
    }
    pwd = a.join("");
    out.value = pwd;

    const pool = all.length;
    const bits = Math.log2(Math.pow(pool, L));
    let label = "Weak";
    if(bits > 90) label = "Very Strong";
    else if(bits > 70) label = "Strong";
    else if(bits > 50) label = "Medium";
    strength.innerHTML = `Strength: <b>${label}</b> â€¢ ~${Math.round(bits)} bits`;
    toast("Generated ğŸ”");
  }

  document.getElementById("gen").addEventListener("click", gen);
  document.getElementById("copy").addEventListener("click", ()=>{
    if(!out.value){ toast("Generate first ğŸ™‚"); return; }
    copyText(out.value);
  });

  gen();
</script>
</body>
</html>